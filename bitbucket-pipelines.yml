image: ubuntu:16.04

pipelines:
  default:
    - step:
        caches:
          - pip
        script:
          - apt-get update
          - apt-get install -y python-pyqt5-dbg python-keyring xvfb curl mercurial
          - curl https://bootstrap.pypa.io/get-pip.py | python
          - pip install -r test-requirements.txt
          - pip install python-coveralls
          - xvfb-run --server-args="-screen 0 1024x768x24" pytest -v -l --full-trace --cov-report= --cov=buildnotifylib
          - pylint -f parseable buildnotifylib/ --disable=missing-docstring,too-many-instance-attributes,too-few-public-methods,too-many-arguments,too-many-public-methods
          - coveralls